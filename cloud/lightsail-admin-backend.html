<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Requirements | Shopizer Technical Documentation</title>
    <meta name="description" content="Just playing around.">
    <link rel="stylesheet" href="/assets/style.7f629115.css">
    <link rel="modulepreload" href="/assets/Home.6774b727.js">
    <link rel="modulepreload" href="/assets/AlgoliaSearchBox.fcdd4a2a.js">
    <link rel="modulepreload" href="/assets/Shopizer-TLS.b0ecac2a.js">
    <link rel="modulepreload" href="/assets/app.e4fe013f.js">
    <link rel="modulepreload" href="/assets/cloud_lightsail-admin-backend.md.5cb4526b.lean.js">
    <link rel="modulepreload" href="/assets/app.e4fe013f.js">
    <link rel="icon" type="image/png" href="/shopizer-cart.png">
    <meta name="twitter:title" content="Requirements | Shopizer Technical Documentation">
    <meta property="og:title" content="Requirements | Shopizer Technical Documentation">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="Shopizer Technical Documentation, back to home" data-v-675d8756 data-v-4a583abe><img class="logo" src="/shopizer-cart.png" alt="Logo" data-v-4a583abe> Shopizer Technical Documentation</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><!----></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><!----><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">Getting started</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/whatisshopizer/default">What is Shopizer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/architecture/Current">Shopizer architecture</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/init/Current">Beginning with Shopizer</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/buildandrunlocally/Current">Build and run locally</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/documentation/default">Technical documentation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/documentation/videotutorials">Video tutorials</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docker/default">Run Shopizer from Docker image</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/docker/compose">Run using Docker Compose</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/cloud/default">Run in the cloud</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/contribute/default">Contribute to Shopizer</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Shopizer Configuration</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/documentation/configuration/default">Configuration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/documentation/database/default">Database</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/documentation/search/cloud">Local configuration of ElasticSearch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/documentation/search/search">Elastic Cloud configuration</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Commerce software</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/software/users/users">Administration of users</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/software/vendors/vendors">Merchants and stores administration</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Catalog management</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Shopping cart functions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Ordering functions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Customer functions</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/software/translation">Shopizer translation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Rules system</a><!----></li><li class="sidebar-link"><p class="sidebar-link-item">Rules system</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">What are modules</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Shipping module</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/documentation/modules/payment">Payment module</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Database schema</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/schema/country/default">Country and Zones reference data</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">REST api</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/notavailable">Swagger documentation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/notavailable">Creating new REST services</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/notavailable">Handling REST errors</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Shopizer security</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Admin authentication</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Customer authentication</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">REST api authentication</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Shopizer metrics</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Configure analytics</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Discover Shopizer e-commerce data</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Monolith deploy</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Deploy Shopizer on premise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Deploy Shopizer on AWS</a><!----></li><li class="sidebar-link"><p class="sidebar-link-item">Deploy Shopizer on various clouds</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Catalog service</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">AWS Lightsail simple deployment</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">AWS Lightsail with node - Angular admin - Shopizer backend</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">Microservices deploy</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Catalog service</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">User service</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Shipping service</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Common module</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/markdown/notavailable">Payment service</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><p>This simple infrastructure allows running Shopizer on a simple AWS LightSail virtual maching. An Ubuntu based LightSail virtual machine will be configured with NGINX proxy server and Shopizer Admin Angular application with Shopizer backend</p><blockquote><p><strong>$</strong><strong>AWS LightSail</strong> Linux / Unix - OS Only Ubuntu 18.0.4 LTS 4GB - 2vCPU - 80TB</p></blockquote><p>This configuration can be done on any the of virtual machine or on any on premise server. The reason for using AWS Lightsail is the simple way to configure working vm on specific regions with tools handy for specific firewall configuration and backup facility. All of this could also be created using simple EC2 instances on AWS.</p><p><strong>###DOCUMENTATION TO BE COMPLETED SOON</strong></p><p><img src="/assets/Shopizer-TLS.d6599970.png" alt="AWS LightSail VM diagram" title="Shopizer running on simple AWS LightSail VM"></p><h2 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-hidden="true">#</a></h2><ul><li>AWS Account</li><li>Have Shopizer configurations handy</li></ul><h2 id="installation-instructions" tabindex="-1">Installation instructions <a class="header-anchor" href="#installation-instructions" aria-hidden="true">#</a></h2><p>The following section describes complete installation steps</p><h3 id="lightsail" tabindex="-1">Lightsail <a class="header-anchor" href="#lightsail" aria-hidden="true">#</a></h3><ul><li>In AWS Console <ul><li>Create new LightSail instance</li><li>Select blueprint OS Only <ul><li>select Ubuntu server from the list, last version available is preferable</li><li>click on &#39;Add launch script&#39; and copy following script in the box in the text box</li></ul></li></ul></li></ul><div class="language-sh"><pre><code>#!/bin/bash

# install latest version of docker the lazy way
curl -sSL https://get.docker.com | sh

# make it so you don&#39;t need to sudo to run docker commands
usermod -aG docker ubuntu

# install docker-compose
curl -L https://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# copy the dockerfile into /srv/docker 
# if you change this, change the systemd service file to match
# WorkingDirectory=[whatever you have below]
mkdir /srv/docker
sudo curl -o /srv/docker/docker-compose.yml https://raw.githubusercontent.com/shopizer-ecommerce/shopizer-docker-compose/master/docker-compose-aws.yml


# copy in systemd unit file and register it so our compose file runs 
# on system restart
sudo curl -o /etc/systemd/system/docker-compose-app.service https://raw.githubusercontent.com/shopizer-ecommerce/shopizer-docker-compose/master/docker-compose-app.service

sudo chmod 755 /etc/systemd/system/docker-compose-app.service
sudo systemctl enable docker-compose-app
</code></pre></div><p>All commands above simplify docker and docker compose installation. They also pull pre configured docker-compose file ready to run Shopizer&#39;s latest version</p><ul><li>In AWS Console <ul><li>Complete LightSail configuration <ul><li>select an instance plan for a 4GB server (requires running the server, nginx, mysql and elastic)</li><li>ssh key pair create new</li><li>give a name to keypair (ie my-shopizer-lightsail)</li><li>download key and save pem file to a secure location</li><li>if you are on a mac or linux change mode on downloaded key file <code>sh chmod 400 my-shopizer-lightsail.pem</code></li><li>create unique instance name (ie my-shopizer-docker-compose)</li><li>add key value tage Name = my-shopizer-docker-compose</li><li>click create instance</li></ul></li></ul></li></ul><h3 id="install-nginx" tabindex="-1">Install NGINX <a class="header-anchor" href="#install-nginx" aria-hidden="true">#</a></h3><p>From AWS LightSail ssh console</p><div class="language-sh"><pre><code>sudo apt update
sudo apt install nginx
systemctl status nginx
</code></pre></div><p>Test NGINX installation</p><div class="language-sh"><pre><code>curl http://localhost
</code></pre></div><h4 id="configure-nginx-reverse-proxy" tabindex="-1">Configure NGINX reverse proxy <a class="header-anchor" href="#configure-nginx-reverse-proxy" aria-hidden="true">#</a></h4><p>Reverse proxy allows to proxy requests on port 80 and 443 to Shopizer running instance on port 8080</p><div class="language-sh"><pre><code>sudo unlink /etc/nginx/sites-enabled/default
cd /etc/nginx/sites-available
sudo nano reverse-proxy.conf
</code></pre></div><p>Copy those following lines in open for edit window (nano)</p><div class="language-sh"><pre><code>server {
        listen 80;
        listen [::]:80;
        server_name yourwebsite.ca;
        access_log /var/log/nginx/reverse-access.log;
        error_log /var/log/nginx/reverse-error.log;

        location / {
            proxy_pass http://localhost:8080;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
}

</code></pre></div><p>Change server_name to your target domain name</p><p>Exit from nano and save (Ctrl X)</p><p>Copy the configuration from /etc/nginx/sites-available to /etc/nginx/sites-enabled. It is recommended to use a symbolic link.</p><div class="language-sh"><pre><code>sudo ln -s /etc/nginx/sites-available/reverse-proxy.conf /etc/nginx/sites-enabled/reverse-proxy.conf
</code></pre></div><p>validate NGINX configuration</p><div class="language-sh"><pre><code>sudo nginx -t
</code></pre></div><p>Previous command should not display any error</p><p>restart NGINX</p><div class="language-sh"><pre><code>sudo systemctl restart nginx
</code></pre></div><h3 id="for-ssl-install-certbot-on-your-instance" tabindex="-1">For SSL = Install Certbot on your instance <a class="header-anchor" href="#for-ssl-install-certbot-on-your-instance" aria-hidden="true">#</a></h3><h3 id="open-lightsail-required-ports" tabindex="-1">Open LightSail required ports <a class="header-anchor" href="#open-lightsail-required-ports" aria-hidden="true">#</a></h3><p>Lightsail Open ports 80 9090 22</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"api_overview.md\":\"cdb0c9cc\",\"architecture_current.md\":\"f3ae1aff\",\"buildandrunlocally_current.md\":\"7e28e7ea\",\"cloud_default.md\":\"762cffa2\",\"cloud_lightsail-admin-backend.md\":\"5cb4526b\",\"cloud_lightsail-npm.md\":\"ce8b2419\",\"cloud_lightsail-simple.md\":\"e67d7b11\",\"contribute_default.md\":\"5a8540f4\",\"default.md\":\"3e05cf28\",\"docker-local_default.md\":\"68df9917\",\"docker_compose.md\":\"775b33c6\",\"docker_default.md\":\"3953450d\",\"documentation_configuration_default.md\":\"32e1f1f9\",\"documentation_configurations_default.md\":\"621fcf7f\",\"documentation_content_default.md\":\"48373ac1\",\"documentation_database_default.md\":\"0cb3933a\",\"documentation_default.md\":\"4c30a536\",\"documentation_emails_default.md\":\"75474d71\",\"documentation_modules_payment.md\":\"9fc56b29\",\"documentation_search_cloud.md\":\"31d550a2\",\"documentation_search_search.md\":\"7893ec44\",\"documentation_swagger_current.md\":\"6c4b4e56\",\"documentation_videotutorials.md\":\"78284484\",\"index.md\":\"de5cd81e\",\"init_current.md\":\"a5f1ce7b\",\"metrics_analytics.md\":\"647c738b\",\"metrics_discover.md\":\"6becadd6\",\"notavailable.md\":\"6422d798\",\"process_introduction.md\":\"5b5c6e63\",\"process_newpageshowto.md\":\"f6ea7aeb\",\"schema_country_default.md\":\"c1053b91\",\"software_translation.md\":\"b2ef0667\",\"software_users_users.md\":\"b6888236\",\"software_vendors_vendors.md\":\"4b687250\",\"whatisshopizer_default.md\":\"3a227d77\"}")</script>
    <script type="module" async src="/assets/app.e4fe013f.js"></script>
    
  </body>
</html>